// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model UserEstabelecimento {
  id           Int            @id @default(autoincrement())
  email        String         @unique
  nome         String
  telefone     String
  tiposservico TiposServico[] // Um estabelecimento pode ter nenhum ou vários tipos de serviço
  agendamento  Agendamento[] // Um estabelecimento pode ter nenhum ou vários agendamentos de clientes diferentes
}

model TiposServico {
  id                    Int                 @id @default(autoincrement())
  name                  String
  timeservice           String // Tempo de serviço
  userEstabelecimento   UserEstabelecimento @relation(fields: [userEstabelecimentoId], references: [id]) // Um tipo de serviço pertence a um estabelecimento
  agendamento           Agendamento[] // Um cliente pode selecionar o serviço em um horário disponível
  userEstabelecimentoId Int
}

model UserCliente {
  id          Int           @id @default(autoincrement())
  nome        String
  email       String        @unique
  telefone    String
  agendamento Agendamento[] // Um cliente pode ter nenhum ou vários agendamentos com um estabelecimento e um serviço
}

model Agendamento {
  id                    Int                 @id @default(autoincrement())
  dia                   String
  mes                   String
  horario               DateTime
  userEstabelecimento   UserEstabelecimento @relation(fields: [userEstabelecimentoId], references: [id])
  userEstabelecimentoId Int
  tiposServico          TiposServico        @relation(fields: [tiposServicoId], references: [id])
  tiposServicoId        Int
  userCliente           UserCliente         @relation(fields: [userClienteId], references: [id])
  userClienteId         Int
}
